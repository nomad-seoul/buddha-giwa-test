<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì†Œì› ê¸°ì™€</title>

  <style>
  body {
  margin: 0;
  font-family: sans-serif;
  text-align: center;

  /* ğŸ”¥ í”½ì…€ ì‚¬ì°° ì´ë¯¸ì§€ ë°°ê²½ ì ìš© */
  background-image: url("images/giwa-temple.png");
  background-size: cover;        /* í™”ë©´ ê½‰ ì±„ì›€ */
  background-repeat: no-repeat;  
  background-position: center;   /* ì¤‘ì•™ ì •ë ¬ */
  background-attachment: fixed;  /* ìŠ¤í¬ë¡¤í•´ë„ ê³ ì • */
}

    .main-wrapper {
      width: 100%;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .center-content {
      max-width: 340px;
    }

    /* ------------------------------------------ */
    /* ğŸ”˜ ë””ì§€í„¸ ì‚¬ì°° pixel-button ìŠ¤íƒ€ì¼ */
    /* ------------------------------------------ */
    .pixel-button {
      background-color: #a8a8a8;
      background-image:
        radial-gradient(rgba(0, 0, 0, 0.1) 2%, transparent 3%),
        radial-gradient(rgba(255, 255, 255, 0.05) 1%, transparent 4%),
        linear-gradient(45deg, rgba(80, 80, 80, 0.05) 25%, transparent 25%);
      background-size: 6px 6px, 8px 8px, 100% 100%;
      border: 3px solid #2d2d2d;
      border-radius: 4px;
      font-family: 'D2Coding', monospace;
      font-size: 12px;
      color: #222;
      padding: 14px 22px;
      box-shadow:
        inset -1px -1px 2px #5e5e5e,
        inset 1px 1px 2px #e1e1e1,
        3px 3px 0 #1e1e1e;
      cursor: pointer;
      text-shadow: 1px 1px 0 #eeeeee;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .pixel-button:hover {
      background-color: #8f8f8f;
      box-shadow:
        inset -1px -1px 2px #444,
        inset 1px 1px 2px #ccc,
        2px 2px 0 #000;
      transform: translateY(-1px) scale(1.02);
    }

    .button-group-horizontal {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 18px;
    }


    /* ------------------------------------------ */
    /* ğŸ”¥ giwa.pngë¥¼ ì…ë ¥ì°½ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ (ìµœì¢…ë³¸) */
    /* ------------------------------------------ */
    .giwa-input-wrapper {
      width: 300px;
      height: 320px;
      margin: 0 auto;
      position: relative;

      background-image: url("images/giwa.png");
      background-size: cover;
      background-position: center;

      overflow: hidden; /* ğŸ”¥ ê¸°ì™€ ë°– ê¸€ì ì ˆëŒ€ ì•ˆë³´ì„ */
    }

    .giwa-input-wrapper textarea {
      position: absolute;
    touch-action: none; 

      /* ê¸°ì™€ ì•ˆì—ì„œë§Œ ë‚˜ì˜¤ë„ë¡ ìœ„ì¹˜ ì¡°ì • */
      top: 32%;
      left: 23%;
      width: 63%;
      height: 45%;

      background: transparent;
      border: none;
      resize: none;
      outline: none;

      padding: 0;
      margin: 0;

      overflow-y: auto;  /* ğŸ”¥ ë„˜ì¹˜ë©´ ìŠ¤í¬ë¡¤ */
      overflow-x: hidden;

      color: white;
      font-family: "Gowun Batang", serif;
      font-size: 18px;
      line-height: 1.7;
      letter-spacing: 1px;

      text-shadow: 1px 1px 2px rgba(0,0,0,0.85);

      /* ê¸°ì™€ ê³¡ë©´ ëŠë‚Œ */
      transform: perspective(600px) rotateX(10deg);
    }

    .giwa-input-wrapper textarea::placeholder {
      color: rgba(255,255,255,0.45);
    }

    #result {
      margin-top: 12px;
      font-size: 15px;
      font-weight: 500;
    }
    /* ğŸ”¥ ìŠ¤ì™€ì´í”„ ì‹œ ê¸°ì™€ê°€ ë‚ ì•„ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜ */

/* ê¸°ì™€ê°€ í•˜ëŠ˜ë¡œ ì˜¬ë¼ê°€ë©° ë¹›ë‚˜ëŠ” íš¨ê³¼ */
.giwa-fly-up {
  transition: transform 0.7s ease-out, opacity 0.7s, filter 0.7s;
  transform: translateY(-160%) scale(1.1);
  opacity: 0;
  filter: brightness(2);
}
/* ğŸ‡ ì „ì²´ í™”ë©´ìœ¼ë¡œ í¼ì§€ëŠ” ê¸ˆë¹› íŒŒí‹°í´ */
.particle {
  position: fixed; /* í™”ë©´ ê¸°ì¤€ */
  width: 30px;
  height: 14px;
  background: radial-gradient(circle, #ffe9a8, #ffb300, #e07d00);
  border-radius: 50%;
  pointer-events: none;
  opacity: 0.9;
  animation: particle-explode 10s ease-out forwards;
}

@keyframes particle-explode {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(
      calc(-150px + 300px * var(--rx)),
      calc(-150px + 300px * var(--ry))
    ) scale(0.3);
    opacity: 0;
  }
}



  </style>
</head>

<body>

<div class="main-wrapper">
  <div class="center-content">

    <!-- ğŸ”¥ ê¸°ì™€ ì´ë¯¸ì§€ ì…ë ¥ì°½ -->
<div class="giwa-input-wrapper" id="giwaBox">
  <textarea id="wishMessage" placeholder="ì†Œì›ì„ ì ê³  ê¸°ì™€ë¥¼ í˜ê» ì˜¬ë ¤ë³´ì„¸ìš”!"></textarea>
</div>


    <!-- ë²„íŠ¼ -->
    <div class="button-group-horizontal">
      <button class="pixel-button" onclick="backToMain()">ë’¤ë¡œê°€ê¸°</button>
    </div>

    <p id="result"></p>

  </div>
</div>

<!-- ----------------------------------------- -->
<!-- ğŸ”¥ Firebase ì—°ë™ -->
<!-- ----------------------------------------- -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBSwwbQ0VpQhjhnw8Gw3DuVoICDYA6Gqbo",
    authDomain: "nomadseoul0.firebaseapp.com",
    databaseURL: "https://nomadseoul0-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "nomadseoul0",
    storageBucket: "nomadseoul0.firebasestorage.app",
    messagingSenderId: "677147290174",
    appId: "1:677147290174:web:18de44b1d42e0ece50bf6f",
    measurementId: "G-MHR16X2CJS"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  window.submitWish = async function () {
    const message = document.getElementById("wishMessage").value;



    await push(ref(db, "wishes"), {
      name: "ìµëª…",
      message,
      time: Date.now()
    });

    document.getElementById("wishMessage").value = "";
    document.getElementById("result").innerText = "âœ¨ ì†Œì›ì´ ê¸°ì™€ì— ì˜¬ë¼ê°”ìŠµë‹ˆë‹¤!";
  };

  window.backToMain = function () {
    window.location.href = "index.html";
  };
let startY = 0;
let currentY = 0;
let isSwiping = false;
let swipeStarted = false;

const giwa = document.getElementById("giwaBox");

// í„°ì¹˜ ì‹œì‘
giwa.addEventListener("touchstart", (e) => {
  startY = e.touches[0].clientY;
  swipeStarted = false;
});

// í„°ì¹˜ ì´ë™
giwa.addEventListener("touchmove", (e) => {
  currentY = e.touches[0].clientY;
  let delta = currentY - startY;

  // ğŸ”¥ 30px ì´ìƒ ìœ„ë¡œ ì›€ì§ì´ë©´ ìŠ¤ì™€ì´í”„ ì‹œì‘
  if (delta < -30) {
    swipeStarted = true;
  }

  // ìŠ¤ì™€ì´í”„ê°€ ì‹œì‘ëœ ê²½ìš°ë§Œ ê¸°ì™€ ì´ë™
  if (swipeStarted && delta < 0) {
    e.preventDefault(); // ê¸€ì“°ê¸°/ìŠ¤í¬ë¡¤ ë°©í•´í•˜ì§€ ì•ŠìŒ
    giwa.style.transform = `translateY(${delta}px)`;
  }
});

// í„°ì¹˜ ì¢…ë£Œ
giwa.addEventListener("touchend", async () => {
  let distance = currentY - startY;
if (distance < -80) {

  giwa.classList.add("giwa-fly-up");

  // ê¸°ì™€ ì¤‘ì‹¬ ì¢Œí‘œ ê³„ì‚°
  const rect = giwa.getBoundingClientRect();

  // ê¸ˆë¹› íŒŒí‹°í´ ìƒì„±
  for (let i = 0; i < 12; i++) {
    const p = document.createElement("div");
    p.className = "particle";

    p.style.setProperty("--rx", Math.random());
    p.style.setProperty("--ry", Math.random());

    p.style.left = rect.left + rect.width / 2 + "px";
    p.style.top = rect.top + rect.height / 2 + "px";

    document.body.appendChild(p);

    setTimeout(() => p.remove(), 700);
  }

  await submitWish();

  setTimeout(() => {
    giwa.classList.remove("giwa-fly-up");
    giwa.style.transform = "translateY(0)";
    document.getElementById("wishMessage").value = "";
  }, 700);
}

});
</script>
</body>
</html>
